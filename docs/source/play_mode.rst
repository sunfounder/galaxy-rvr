.. note::

    こんにちは、SunFounderのRaspberry Pi & Arduino & ESP32愛好家コミュニティへようこそ！Facebook上でRaspberry Pi、Arduino、ESP32についてもっと深く掘り下げ、他の愛好家と交流しましょう。

    **参加する理由は？**

    - **エキスパートサポート**：コミュニティやチームの助けを借りて、販売後の問題や技術的な課題を解決します。
    - **学び＆共有**：ヒントやチュートリアルを交換してスキルを向上させましょう。
    - **独占的なプレビュー**：新製品の発表や先行プレビューに早期アクセスしましょう。
    - **特別割引**：最新製品の独占割引をお楽しみください。
    - **祭りのプロモーションとギフト**：ギフトや祝日のプロモーションに参加しましょう。

    👉 私たちと一緒に探索し、創造する準備はできていますか？[|link_sf_facebook|]をクリックして今すぐ参加しましょう！

.. _play_mode:

プレイモード
=========================

すぐに火星の旅を始めたいと思っていますか？私たちのプレイモードは、待ちきれないあなたのために特別に設計されています。工場出荷時にプリロードされたコードを装備しているので、GalaxyRVRを組み立てた後すぐにアクションに飛び込むことができます。使いやすいSunFounderコントローラーアプリを使用して、一人称視点の運転、障害物回避モードとフォローモードの切り替え、さらには音声制御など、多様な機能を探索してみてください。

.. raw:: html
    
    <video width="600" loop autoplay muted>
        <source src="_static/video/play_mode.mp4" type="video/mp4">
        お使いのブラウザはビデオタグをサポートしていません。
    </video>

しかし、赤い惑星の探索に出かける前に、冒険に備えて完全に装備されていることを確認しましょう。以下に、このエキサイティングな旅のためのクイックガイドを用意しました！

.. note::

    * R3ボードに他のコードが既にアップロードされているが、プレイモードを続けたい場合は、関連するコードをダウンロードする必要があります。

        * :download:`GalaxyRVR コード <https://github.com/sunfounder/galaxy-rvr/archive/refs/heads/main.zip>`

    * 次に、 ``galaxy-rvr-main\galaxy-rvr`` ディレクトリにある ``galaxy-rvr.ino`` ファイルを開きます。
    
    * スイッチを右に移動し、 **Upload** をクリックします。
    * :ref:`install_lib`

    .. image:: img/camera_upload.png
        :width: 400
        :align: center


クイックガイド
---------------------

#. GalaxyRVRを起動しましょう。

    * GalaxyRVRを初めて使用する際には、まずType-C USBケーブルを接続してバッテリーを完全に充電することをお勧めします。その後、電源をオンにします。
    
        .. raw:: html

            <video width="600" loop autoplay muted>
                <source src="_static/video/play_start.mp4" type="video/mp4">
                お使いのブラウザはビデオタグをサポートしていません。
            </video>

    * ESP32 CAMをアクティブにするには、モードスイッチを **Run** 位置に移動し、R3ボードを再起動するために **reset** ボタンを押します。すると、下部のストリップにシアン色の光が点滅するのが観察できます。

        .. raw:: html

            <video width="600" loop autoplay muted>
                <source src="_static/video/play_reset.mp4" type="video/mp4">
                お使いのブラウザはビデオタグをサポートしていません。
            </video>

#. `SunFounder Controller <https://docs.sunfounder.com/projects/sf-controller/en/latest/>`_ を **APP Store(iOS)** または **Google Play(Android)** からインストールします。


#. ``GalaxyRVR`` ネットワークに接続します。

    モバイルデバイスとローバーの間の最適な通信を実現するためには、それらをGalaxyRVRが提供する同じローカルエリアネットワーク（LAN）に接続する必要があります。


    * モバイルデバイス（タブレットやスマートフォン）の利用可能なネットワークリストで ``GalaxyRVR`` を見つけ、パスワード ``12345678`` を入力し、それに接続します。

        .. image:: img/app/camera_lan.png

    * デフォルトの接続モードは **AP mode** です。接続した後、このネットワークにインターネットアクセスがないという警告プロンプトが表示される場合があります。その場合は、「Stay connected」を選択してください。

        .. image:: img/app/camera_stay.png


#. コントローラーの設定。

    * SunFounder Controllerでコントローラーを作成するには、 **+** アイコンをタップします。

        .. image:: img/app/app1.png

    * いくつかの製品にはプリセットコントローラーが用意されていますが、ここでは **GalaxyRVR** を選択します。名前を付けるか、単に **Confirm** をタップします。

        .. image:: img/app/play_preset.jpg
    
    * アプリ内で、GalaxyRVRを自動的に検索します。しばらくすると、「Connected Successfully」というプロンプトが表示されます。

        .. image:: img/app/auto_connect.jpg

        .. note::

            * 接続されていない場合は、Wi-Fiが ``GalaxyRVR`` に接続されているか確認してください。
            * |app_connect| ボタンをタップして手動で接続することもできます。少し待つと、 ``GalaxyRVR(IP)`` が表示されます。タップして接続を確立します。

            .. image:: img/app/camera_connect.png
                :width: 300
                :align: center


    * 今、|app_run| ボタンをタップすると、カメラからのライブ映像を視聴し、提供されたウィジェットを使用して車を制御できます。

        .. image:: img/app/play_run_view.jpg

#. それでは、各ウィジェットの機能について詳しく見ていきましょう：

        * **Servo(D)**：ローバーのカメラのチルト機構を制御し、より広範囲を観察できます。

        * :ref:`app_avoid`：ローバーを障害物回避モードに切り替えます。各障害物回避モジュールの工場設定の検出距離は異なる場合があります。手動調整が必要です。

        * :ref:`app_follow`：ローバーをフォローモードに切り替えます。各障害物回避モジュールの工場設定の検出距離は異なる場合があります。手動調整が必要です。

        * **Stop(I)**：ローバーのすべての動きを即座に停止します。

        * :ref:`app_speech_control`：このウィジェットを押して音声認識を開始し、ローバーに対応するアクションを実行させます。

        * **HeadLamp(M)**：ESP32 CAMのLEDをオン/オフにします。
        * **Throttle Widgets on K and Q**：Kエリアのスロットルウィジェットはローバーの左モーターを制御し、Qエリアのものは右モーターを制御します。両方のウィジェットを調整することで、GalaxyRVRを任意の方向に動かすことができます。

        * **Left IR(N)**：左側の障害物回避モジュールからの読み取りを表示します。

        * **Ultrasonic(O)**：超音波モジュールによって測定された距離を表示します。

        * **Right IR(P)**：右側の障害物回避モジュールからの読み取りを表示します。

.. _app_avoid:

Avoid(E)
------------------------

**Avoid(E)** ウィジェットをタップして障害物回避モードを有効にします。

このモードを有効にする前に、現在の環境に応じてセンサーの検出範囲を調整する必要があるかもしれません。工場設定はすべての状況に適しているわけではありません。

二つの赤外線モジュールの検出範囲が短すぎると、火星ローバーが障害物にぶつかる可能性があります。逆に、範囲が長すぎると、ローバーが障害物から遠ざかりすぎてしまい、ナビゲーションが妨げられる可能性があります。

以下の方法で設定を微調整できます：

#. 右の障害物回避モジュールの調整から始めます。輸送中の衝突により、赤外線モジュールの送信機と受信機が傾く可能性があるため、手動で直す必要があります。

    .. raw:: html

        <video width="600" loop autoplay muted>
            <source src="_static/video/ir_adjust1.mp4" type="video/mp4">
            お使いのブラウザはビデオタグをサポートしていません。
        </video>

#. 障害物を右モジュールの正面約20cmの位置に置きます。ローバーキットが入っていた箱を使用すると良いでしょう！次に、モジュール上のポテンショメーターを回して、モジュール上のインジケーターライトが点灯するまで調整します。その後、障害物を前後に動かして、希望する距離でインジケーターライトが点灯するか確認します。正しい距離でライトが点灯しない場合や、消えない場合は、もう一方のポテンショメーターを調整する必要があります。

    .. raw:: html

        <video width="600" loop autoplay muted>
            <source src="_static/video/ir_adjust2.mp4" type="video/mp4">
            お使いのブラウザはビデオタグをサポートしていません。
        </video>


#. 同じプロセスをもう一方のモジュールに対して繰り返します。


.. _app_follow:

Follow(F)
------------

フォローモードを有効にしたい場合は、 **Follow(F)** ウィジェットをタップするだけです。以前に障害物回避モジュールの検出距離を調整していない場合は、まず :ref:`app_avoid` の手順に従う必要があります。

フォローモードになると、GalaxyRVRは前方の物体に向かって動くか、物体の動きに合わせて左右に回転します。


.. _app_speech_control:

STT(J)
-------------------


STTはSpeech to Textの略です。SunFounder Controllerアプリは、モバイルデバイスの音声認識エンジンと連携しています。したがって、SunFounder Controllerで **STT(J)** ウィジェットをタップし続け、モバイルデバイスに向かって話すと、

あなたのデバイスはあなたの発言をキャプチャし、テキストに変換してGalaxyRVRに送信します。このテキストがコード内の事前設定されたコマンドと一致する場合、ローバーは対応するアクションを実行します。

以下は、コードに事前設定されたコマンドです。以下のコマンドのいずれかを話して、GalaxyRVRがどのように反応するかを観察してください。

.. image:: img/app/play_speech.png
    :width: 600

* ``stop``：ローバーのすべての動きを停止させることができます。
* ``forward``：ローバーを前進させます。
* ``backward``：ローバーを後退させます。
* ``left``：ローバーを左に曲げます。
* ``right``：ローバーを右に曲げます。


.. note::

    STT（Speech to Text）機能は、インターネット接続とAndroidデバイス上のGoogleサービスを必要とします。しかし、GalaxyRVRの事前設定されたAP（アクセスポイント）モードでは動作しません。
    
    APモードでは、GalaxyRVRがローカルWi-Fiネットワークを作成し、モバイルデバイスが接続できますが、インターネットアクセスは提供されません。
    
    AndroidでSTT機能を使用するには、:ref:`stt_android` で説明されているように、ローバーのコードをAPモードからSTAモードに切り替えてください。

.. note::

    iOSデバイスは、オフラインの音声認識エンジンを使用しているため、APモードとSTAモードの両方で問題なく動作します。
    